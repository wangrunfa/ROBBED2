<!DOCTYPE html>
<html  lang="zh" xmlns:th="http://www.thymeleaf.org">
	<head>
		<meta charset="utf-8">
		<title></title>
		<script type="text/javascript" src="js/browser-polyfill.min.js"></script>
		<script src="https://cdn.staticfile.org/jquery/1.10.2/jquery.min.js">
		</script>
		<link href="../static/css/qdlogin.css"  rel="stylesheet"  th:href="@{/css/qdlogin.css}"/>
	</head>
	<body>
	<div id="app" style="background: url(http://ymj.qfwlkj.net/static/img/login.8f1f80a.png) no-repeat 50%/cover;">
		<div data-v-0aa2b8cf="" class="af-page login-page">
			<div data-v-0aa2b8cf="" class="login-box-wrapper">
				<div data-v-0aa2b8cf="" class="login-box">
					<!---->
					<form action="/loginUser" method="post"  class="form-validate mb-4">
					<div data-v-0aa2b8cf="" class="login-way">
						<div data-v-0aa2b8cf="" class="l-title">密码登录</div>
						<div data-v-0aa2b8cf="" class="in"><input data-v-0aa2b8cf="" name="lgPhone" type="text" maxlength="11" placeholder="手机号码" class="text"></div>
						<div data-v-0aa2b8cf="" class="in last"><input data-v-0aa2b8cf="" type="lgpassword" placeholder="密码" class="text"></div>
						<div data-v-0aa2b8cf="" class="remember-pwd">
							<!----> <input type="checkbox" /> <label data-v-0aa2b8cf="">记住密码</label></div>
						<input data-v-0aa2b8cf="" type="submit" value="登录" class="submit"/>
					</div>
					</form>
					<!---->
					<div data-v-0aa2b8cf="" class="sub-other">
						<div data-v-0aa2b8cf="" class="pull-left">设置密码</div>
						<div data-v-0aa2b8cf="" class="pull-right">免费注册</div>
					</div>
				</div>

			</div>
			<!---->
			<!---->
			<!---->
			<div data-v-0aa2b8cf="" class="layer-mask" style="display: none;"></div>
			<div data-v-0aa2b8cf="" class="dialog-box dialog-pwd-reset mianfeizhuce" style="display: none;">
				<div data-v-0aa2b8cf="" class="dialog-content">
					<div data-v-0aa2b8cf="" class="dialog-title">免费注册</div>
					<div data-v-0aa2b8cf="" class="dialog-form">
						<div data-v-0aa2b8cf="" class="in"><input data-v-0aa2b8cf="" id="register-phone" type="text" maxlength="11" placeholder="输入绑定手机号码"
																  class="text"></div>
						<div data-v-0aa2b8cf="" class="d-relative in"><input data-v-0aa2b8cf="" type="text" placeholder="请输入图形验证码" class="text">
							<img data-v-0aa2b8cf="" src="http://lender.pc.api.qfwlkj.net/captcha/getImgCode?randSuffix=547d5563-990d-4b5e-94e3-9df9c0d0a7a8"
								 alt="" class="verify-img"></div>
						<div data-v-0aa2b8cf="" class="in last"><input data-v-0aa2b8cf="" type="text" placeholder="输入短信验证码" class="text s-text">
							<input data-v-0aa2b8cf="" style="width: 120px;height: 39px;text-align: center;border: 0;" class="pull-right get-code" type="button" id="btnSendCode" onclick="sendMessage();" value="获取验证码" />
							<!---->
						</div>
						<div data-v-0aa2b8cf="" class="in"><input data-v-0aa2b8cf="" type="password" onpaste="return false;" placeholder="新密码"
																  class="text"></div>
						<div data-v-0aa2b8cf="" class="submit">确定</div>
					</div>
				</div>
			</div>
			<!---->
			<!---->
			<div data-v-0aa2b8cf="" class="dialog-box dialog-pwd-reset shezhimima" style="display: none;">
				<div data-v-0aa2b8cf="" class="dialog-content">
					<div data-v-0aa2b8cf="" class="dialog-title">设置密码</div>
					<div data-v-0aa2b8cf="" class="dialog-form">
						<div data-v-0aa2b8cf="" class="in"><input data-v-0aa2b8cf="" id="changePasswordsendMessage-phone" type="text" maxlength="11" placeholder="输入绑定手机号码"
																  class="text"></div>
						<div data-v-0aa2b8cf="" class="d-relative in"><input data-v-0aa2b8cf="" type="text" placeholder="请输入图形验证码" class="text">
							<img data-v-0aa2b8cf="" src="http://lender.pc.api.qfwlkj.net/captcha/getImgCode?randSuffix=547d5563-990d-4b5e-94e3-9df9c0d0a7a8"
								 alt="" class="verify-img"></div>
						<div data-v-0aa2b8cf="" class="in last"><input data-v-0aa2b8cf="" type="text" placeholder="输入短信验证码" class="text s-text">
							<input data-v-0aa2b8cf="" style="width: 120px;height: 39px;text-align: center;border: 0;" class="pull-right get-code" type="button" id="changePasswordsendMessagebtnSendCode" onclick="changePasswordsendMessage();" value="获取验证码" />
							<!---->
						</div>
						<div data-v-0aa2b8cf="" class="in"><input data-v-0aa2b8cf="" type="password" onpaste="return false;" placeholder="密码"
																  class="text"></div>
						<div data-v-0aa2b8cf="" class="submit">确定</div>
					</div>
				</div>
			</div>
			<!---->
		</div>
	</div>
	<script>
		$(document).ready(function() {
			$(".pull-right").click(function() {
				$(".mianfeizhuce").show();
				$(".layer-mask").show();
			});
			$(".layer-mask").click(function() {
				$(".mianfeizhuce").hide();
				$(".layer-mask").hide();
			});

			$(".pull-left").click(function() {
				$(".shezhimima").show();
				$(".layer-mask").show();
			});
			$(".layer-mask").click(function() {
				$(".shezhimima").hide();
				$(".layer-mask").hide();
			});
		});
	</script>
	<script>
		function registerjq() {

			$.ajax({
				//请求方式
				type : "POST",
				//请求的媒体类型
				// contentType: "application/json;charset=UTF-8",
				//请求地址
				url : "/register",
				//数据，json字符串
				// data : {"username":$("#register-username").val(),"studentNumber":$("#register-studentNumber").val(),
				//     "password":$("#register-password").val(),"sex":$('input[name="sex"]:checked').val(),"phone":$("#register-phone").val,"authcode":$("#register-code").val()},
				data:{"username":$("#register-username").val(),studentNumber"studentNumber":$("#register-studentNumber").val(),"password":$("#register-password").val()
					,"sex":$('input[name="sex"]:checked').val(),"phone":$("#register-phone").val(),"authcode":$("#register-code").val()},
				//请求成功
				success : function(result) {
					console.log(result)
					if(result.code==0){
						$(location).prop('href', '/loginym')
					}
					if(result.code==1){
						alert(result.message)
					}

				},
				//请求失败，包含具体的错误信息
				error : function(e){
					console.log(e.status);
					console.log(e.responseText);
				}
			});
		}

		var InterValObj; //timer变量，控制时间
		var count = 60; //间隔函数，1秒执行
		var curCount;//当前剩余秒数
		//发送短信验证码
		function sendMessage() {
			var trlstr=/^[1]([3-9])[0-9]{9}$/;
			var phones=document.getElementById("register-phone").value;
			console.log(trlstr.test(phones))
			if(!trlstr.test(phones)){
				document.getElementById("btnSendCode").value="请检查手机号";
				return false;
			}
			$.ajax({
				//请求方式
				type : "POST",
				//请求的媒体类型
				// contentType: "application/json;charset=UTF-8",
				//请求地址
				url : "/authcode",
				//数据，json字符串
				data : {"phone":phones},
				//请求成功
				success : function(result) {
					console.log(result)

					if(result.code==0){
						curCount = count;
						// 设置button效果，开始计时
						document.getElementById("btnSendCode").setAttribute("disabled","true" );//设置按钮为禁用状态
						document.getElementById("btnSendCode").value=curCount + "秒后重获";//更改按钮文字
						InterValObj = window.setInterval(SetRemainTime, 1000); // 启动计时器timer处理函数，1秒执行一次
					}else{
						write("验证码发送失败")
					}
				},
				//请求失败，包含具体的错误信息
				error : function(e){
					console.log(e.status);
					console.log(e.responseText);
				}
			});


		}

		//timer处理函数
		function SetRemainTime() {
			if (curCount == 0) {//超时重新获取验证码
				window.clearInterval(InterValObj);// 停止计时器
				document.getElementById("btnSendCode").removeAttribute("disabled");//移除禁用状态改为可用
				document.getElementById("btnSendCode").value="重获验证码";
			}else {
				curCount--;
				document.getElementById("btnSendCode").value=curCount + "秒后重获";
			}
		}
	</script>
	<script>
		function changePassword() {

			$.ajax({
				//请求方式
				type : "POST",
				//请求的媒体类型
				// contentType: "application/json;charset=UTF-8",
				//请求地址
				url : "/changePassword",
				//数据，json字符串
				// data : {"username":$("#register-username").val(),"studentNumber":$("#register-studentNumber").val(),
				//     "password":$("#register-password").val(),"sex":$('input[name="sex"]:checked').val(),"phone":$("#register-phone").val,"authcode":$("#register-code").val()},
				data:{"username":$("#register-username").val(),"studentNumber":$("#register-studentNumber").val(),"password":$("#register-password").val()
					,"sex":$('input[name="sex"]:checked').val(),"phone":$("#register-phone").val(),"authcode":$("#register-code").val()},
				//请求成功
				success : function(result) {
					console.log(result)
					if(result.code==0){
						$(location).prop('href', '/loginym')
					}
					if(result.code==1){
						alert(result.message)
					}

				},
				//请求失败，包含具体的错误信息
				error : function(e){
					console.log(e.status);
					console.log(e.responseText);
				}
			});
		}

		var InterValObj; //timer变量，控制时间
		var count = 60; //间隔函数，1秒执行
		var curCount;//当前剩余秒数
		//发送短信验证码
		function changePasswordsendMessage() {
			var trlstr=/^[1]([3-9])[0-9]{9}$/;
			var phones=document.getElementById("changePasswordsendMessage-phone").value;
			console.log(trlstr.test(phones))
			if(!trlstr.test(phones)){
				document.getElementById("changePasswordsendMessagebtnSendCode").value="请检查手机号";
				return false;
			}
			$.ajax({
				//请求方式
				type : "POST",
				//请求的媒体类型
				// contentType: "application/json;charset=UTF-8",
				//请求地址
				url : "/authcode",
				//数据，json字符串
				data : {"phone":phones},
				//请求成功
				success : function(result) {
					console.log(result)

					if(result.code==0){
						curCount = count;
						// 设置button效果，开始计时
						document.getElementById("changePasswordsendMessagebtnSendCode").setAttribute("disabled","true" );//设置按钮为禁用状态
						document.getElementById("changePasswordsendMessagebtnSendCode").value=curCount + "秒后重获";//更改按钮文字
						InterValObj = window.setInterval(SetRemainTime, 1000); // 启动计时器timer处理函数，1秒执行一次
					}else{
						write("验证码发送失败")
					}
				},
				//请求失败，包含具体的错误信息
				error : function(e){
					console.log(e.status);
					console.log(e.responseText);
				}
			});


		}

		//timer处理函数
		function SetRemainTime() {
			if (curCount == 0) {//超时重新获取验证码
				window.clearInterval(InterValObj);// 停止计时器
				document.getElementById("changePasswordsendMessagebtnSendCode").removeAttribute("disabled");//移除禁用状态改为可用
				document.getElementById("changePasswordsendMessagebtnSendCode").value="重获验证码";
			}else {
				curCount--;
				document.getElementById("changePasswordsendMessagebtnSendCode").value=curCount + "秒后重获";
			}
		}
	</script>
	<script src="js/408b9e2b2cc7adaceed3.js"></script>
	</body>
</html>
