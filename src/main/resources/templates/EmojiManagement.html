<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title></title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="robots" content="all,follow">
    <!-- Bootstrap CSS-->
    <link rel="stylesheet" href="vendor/bootstrap/css/bootstrap.min.css">
    <!-- Font Awesome CSS-->
    <link rel="stylesheet" href="vendor/font-awesome/css/font-awesome.min.css">
    <!-- Custom Font Icons CSS-->
    <link rel="stylesheet" href="css/font.css">
    <!-- Google fonts - Muli-->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Muli:300,400,700">
    <!-- theme stylesheet-->
    <link rel="stylesheet" href="css/style.default.css" id="theme-stylesheet">
    <!-- Custom stylesheet - for your changes-->
    <link rel="stylesheet" href="css/custom.css">
    <!-- Custom stylesheet - for your changes-->
    <link rel="stylesheet" href="css/Emoji.css">


    <!-- Favicon-->
    <link rel="shortcut icon" href="img/favicon.ico">
    <!-- Tweaks for older IEs--><!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script><![endif]-->
</head>
<body>

<!-- 模态框（Modal） -->
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" style="margin: -1rem -1rem -1rem 0;" class="close" data-dismiss="modal"
                        aria-hidden="true">&times;
                </button>
                <h4 class="modal-title" id="myModalLabel">CEDAR8.CN提示！</h4>
            </div>
            <div class="modal-body" id="modal-body-texts"></div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal" style="background: wheat;">取消
                </button>
                <button type="button" class="btn btn-primary" onclick="qcconfirm()">确认保存</button>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal -->
</div>


<span th:replace="~{publicPageHeader::headerPage}"></span>

<div class="d-flex align-items-stretch">
    <!-- Sidebar Navigation-->
    <span th:replace="~{publicPageLeft::LeftPage}"></span>
    <!-- Sidebar Navigation end-->
    <div class="page-content">
        <!-- Page Header-->
        <div class="page-header no-margin-bottom">
            <div class="container-fluid">
                <h2 class="h5 no-margin-bottom">WWW.CEDAR8.CN</h2>
            </div>
        </div>
        <!-- Breadcrumb-->
        <div class="container-fluid">
            <ul class="breadcrumb">
                <li class="breadcrumb-item"><a onclick="SetRemainTimess()">
                    高校床位
                </a></li>
                <li class="breadcrumb-item active">Tables</li>
            </ul>
        </div>
        <section class="no-padding-top">
            <div class="container-fluid">
                <div class="row" id="refreshthml">

                    <script>
                        var curCount=60;
                        var InterValObj; //timer变量，控制时间
                        window.onload = function(){
                            console.log("------------+");
                            this.refresh();
                           InterValObj = window.setInterval(SetRemainTime, 2500);
                        };
                        function SetRemainTime() {
                            if (curCount == 0) {//超时重新获取验证码
                                window.clearInterval(InterValObj);// 停止计时器

                            }else {
                                curCount--;
                                this.refresh();
                        }
                        }
                        function refresh() {

                            console.log("进入----");
                            $.ajax({
                                url: "/EmojiManagementAjax",
                                type: "get",
                                dataType: "json",
                                success: function (result) {
                                    var thmladd = "";
                                    if (result.code == 0) {
                                        for (i = 0; i < result.data.length; i++) {
                                            thmladd += " <div style=\"width: 99%\" class=\"qubuildingName\">\n" +
                                                "                        <div class=\"qc-title-header\">\n" +
                                                "                            <h2>" + result.data[i].buildingName + "</h2>\n" +
                                                "                        </div>\n"
                                            for (f = 0; f < result.data[i].floorInfoList.length; f++) {
                                                thmladd += "                        <span style=\"width: 100%\">\n" +
                                                    "                            <h3 style=\"padding: 20px 30px\">"+result.data[i].floorInfoList[f].floorName+" 层</h3>\n"
                                                for (r = 0; r < result.data[i].floorInfoList[f].roomNumberList.length; r++) {
                                                    thmladd += "                            <span  class=\"buildingName-boxmax\">\n" +
                                                        "                             <h3 style=\"text-align: center;padding:15px\"\n" +
                                                        ">"+result.data[i].floorInfoList[f].roomNumberList[r].roomNumberName+"号房间</h3>\n"
                                                    for (b = 0; b < result.data[i].floorInfoList[f].roomNumberList[r].bedsInfoList.length; b++) {
                                                        thmladd += " <span>\n"
                                                        if (result.data[i].floorInfoList[f].roomNumberList[r].bedsInfoList[b].status==0) {
                                                            thmladd +="<button class=\"btn btn-primary btn-lg\" data-toggle=\"modal\"\n" +
                                                            "                                        style=\"background: #dfbc7a;color: black\"\n" +
                                                            "                                        data-target=\"#myModal\"\n" +
                                                            "                                        onclick=\"javascript:occupation("+result.data[i].floorInfoList[f].roomNumberList[r].bedsInfoList[b].floor+","+result.data[i].floorInfoList[f].roomNumberList[r].bedsInfoList[b].roomNumber+","+result.data[i].floorInfoList[f].roomNumberList[r].bedsInfoList[b].id+");\">"+result.data[i].floorInfoList[f].roomNumberList[r].bedsInfoList[b].beds+"</button>"

                                                        }
                                                        if (result.data[i].floorInfoList[f].roomNumberList[r].bedsInfoList[b].status==1) {
                                                            thmladd += "                                <button class=\"btn btn-primary btn-lg\"\n" +
                                                                "                                        style=\"background: #ccc;color: black\"\n" +
                                                                "                                        >"+result.data[i].floorInfoList[f].roomNumberList[r].bedsInfoList[b].beds+"</button>\n"
                                                        }

                                                        thmladd += "</span>\n"
                                                    }
                                                    thmladd += " </span>\n"
                                                }
                                                thmladd += "</span>\n"
                                            }
                                            thmladd += "</div>"
                                        }

                                    } else if (result.code == 1) {
                                        console.log(result.message);
                                    }

                                    $("#refreshthml").html(thmladd);

                                },
                                error: function (result) {
                                    console.log("error----");
                                }
                            })
                        }

                    </script>
                </div>
            </div>
            <div class="bqb-paging"></div>
        </section>
        <span th:replace="~{publicPageButton::buttonPage}"></span>
    </div>
</div>

<!-- JavaScript files-->
<script src="vendor/jquery/jquery.min.js"></script>
<script src="vendor/popper.js/umd/popper.min.js"></script>
<script src="vendor/bootstrap/js/bootstrap.min.js"></script>
<script src="vendor/jquery.cookie/jquery.cookie.js"></script>
<script src="vendor/chart.js/Chart.min.js"></script>
<script src="vendor/jquery-validation/jquery.validate.min.js"></script>
<script src="js/front.js"></script>
<script src="js/qcbuilding.js"></script>

</body>
</html>